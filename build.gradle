plugins {
    id "org.jetbrains.intellij" version "1.9.0"
    id "org.sonarqube" version "2.8"
}

apply plugin: 'org.jetbrains.intellij'
apply plugin: 'java'
apply plugin: 'jacoco'

targetCompatibility = 11
sourceCompatibility = 11

repositories {
    mavenCentral()
}

intellij {
    version = '2021.1.3'
    plugins = ['git4idea']
}

dependencies {
    implementation 'org.sonarsource.sonarqube:sonar-ws:9.2.4.50792'
    implementation 'org.javassist:javassist:3.28.0-GA'
    implementation 'com.google.code.gson:gson:2.9.0'
    implementation 'joda-time:joda-time:2.10.13'
    testImplementation 'org.easytesting:fest-assert:1.4'
    testImplementation 'junit:junit:4.13.2'
}

sonarqube {
    properties {
        property "sonar.projectName", "SonarQube Community Plugin for Intellij"
        property "sonar.projectKey", "sonar-intellij-plugin"
    }
}

tasks.withType(JavaCompile) {
   it.options.encoding = 'UTF-8'
}

tasks {
    wrapper {
        gradleVersion = 7.4
    }

    patchPluginXml {
        version = '2.10.1-IB'
        sinceBuild = "211"
        untilBuild = "223"
    }
}
